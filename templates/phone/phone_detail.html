{% extends 'base.html' %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
  <div class="card shadow-sm p-4" style="max-width: 600px; width: 100%; border-radius: 20px;">

    {% if phone.image %}
      <div class="text-center mb-4">
        <img src="{{ phone.image.url }}" alt="{{ phone.brand }} {{ phone.model }}"
             style="max-width: 100%; max-height: 300px; object-fit: contain; border-radius: 12px;">
      </div>
    {% endif %}

    <h3 class="text-center fw-bold mb-3">{{ phone.brand }} {{ phone.model }}</h3>

    <ul class="list-group list-group-flush mb-4">
      <li class="list-group-item"><strong>Narxi:</strong> ${{ phone.price }}</li>
      <li class="list-group-item"><strong>Yaratilgan vaqti:</strong> {{ phone.created_at|date:"d M Y, H:i" }}</li>
    </ul>

    {% if phone.description %}
      <div class="mb-3">
        <div class="fw-semibold mb-1">Tavsif:</div>
        <div class="small" style="white-space: pre-wrap;">{{ phone.description }}</div>
      </div>
    {% endif %}

    <!-- Description form -->
    <form action="{% url 'phone-update' phone.id %}" method="post" class="mb-3">
      {% csrf_token %}
      <div class="mb-3">
        <label for="description" class="form-label fw-semibold">Tavsifni yangilash</label>
        <textarea name="description" id="description" rows="3" class="form-control" placeholder="Telefon haqida ma'lumot kiriting...">{{ phone.description }}</textarea>
      </div>
      <button type="submit" class="btn btn-primary w-100">💾 Saqlash</button>
    </form>

    <div class="d-flex justify-content-between">
      <a href="{% url 'phone-list' %}" class="btn btn-outline-primary">⬅️ Orqaga</a>
      <button type="button"
        class="btn btn-outline-danger mb-3"
        onclick="toggleFavorite({{ phone.id }}, this)">
  🤍 Sevimli
</button>


      <form action="{% url 'phone-delete' phone.id %}" method="post" onsubmit="return confirm('Rostdan ham o‘chirmoqchimisiz?')">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-danger">🗑️ O‘chirish</button>
      </form>

      <a href="{% url 'phone-update' phone.id %}" class="btn btn-outline-warning">✏️ Tahrirlash</a>
    </div>

  </div>
</div>

<style>
  body.bg-dark .card {
    background-color: #1e1e1e;
    color: #eee;
  }
  body.bg-dark .list-group-item {
    background-color: #2c2c2c;
    border-color: #444;
    color: #ddd;
  }
  body.bg-dark textarea,
  body.bg-dark input,
  body.bg-dark label {
    background-color: #2c2c2c;
    color: #eee;
  }
</style>
{% endblock %}
